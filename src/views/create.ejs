<%- include('components/head') %>

<form id="form">
    <input type="text" id="title" name="title" placeholder="Title" required>
    <input type="text" id="description" name="description" placeholder="Description" required>
    <input type="file" id="image" name="image" accept="image/*" required>
    <input type="number" id="stock" name="stock" placeholder="Stock" required>
    <input type="number" id="price" name="price" placeholder="Price" required>
    <input type="submit" value="Create">
</form>

<script>
    const form = document.getElementById('form')
    form.addEventListener('submit', async (e) => {
        e.preventDefault()
        const formData = new FormData(form)
        try {
            const response = await fetch('http://localhost:3000/createProduct', {
                method: 'POST',
                body: formData
            })

            const result = await response.json()

            if(response.ok) {
                alert('File uploaded')
            } else {
                alert('Upload failed')
            }
        } catch (error) {
            console.log(error)
            alert('There was an error')
        }

    })
</script>

<%- include('components/foot')%>